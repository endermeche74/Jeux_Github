<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Blackjack Pro & Papayoo Hub</title>
    <style>
        :root {
            --bg-dark: #0f0f0f;
            --card-bg: #1a1a1a;
            --gold: #d4af37;
            --gold-bright: #f1c40f;
            --accent: #3498db;
            --text-main: #e0e0e0;
            --success: #27ae60;
            --danger: #c0392b;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh;
        }

        /* --- NAVIGATION --- */
        header {
            width: 100%; max-width: 600px;
            padding: 15px; display: flex; justify-content: space-between;
            box-sizing: border-box; position: sticky; top: 0; z-index: 100;
            background: rgba(15,15,15,0.9); backdrop-filter: blur(5px);
        }

        .nav-btn {
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: bold;
            transition: 0.3s;
        }
        .nav-btn:hover { background: var(--gold); color: black; }

        /* --- SCREENS --- */
        .screen { width: 100%; max-width: 500px; padding: 20px; box-sizing: border-box; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

        /* --- CARDS & PANELS --- */
        .glass-panel {
            background: var(--card-bg); border: 1px solid #333;
            border-radius: 16px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .btn-main {
            background: linear-gradient(135deg, var(--gold), #aa8a2e);
            color: black; border: none; padding: 18px; width: 100%;
            border-radius: 12px; font-size: 1.1rem; font-weight: 800;
            cursor: pointer; margin-top: 10px; text-transform: uppercase;
        }

        /* --- BLACKJACK UI --- */
        #bj-card-display {
            height: 280px; width: 200px; background: white; border-radius: 15px;
            margin: 30px auto; display: flex; align-items: center; justify-content: center;
            font-size: 5rem; font-weight: bold; position: relative; color: black;
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.2);
        }
        .card-suit { position: absolute; font-size: 2rem; }
        .top-left { top: 10px; left: 15px; }
        .bottom-right { bottom: 10px; right: 15px; }

        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .stat-box { background: #252525; padding: 15px; border-radius: 12px; text-align: center; border: 1px solid #444; }
        .stat-label { font-size: 0.8rem; color: #888; text-transform: uppercase; display: block; }
        .stat-val { font-size: 1.8rem; font-weight: bold; color: var(--gold-bright); }

        /* --- GUIDE PAGE --- */
        .guide-section { margin-bottom: 25px; line-height: 1.5; }
        .guide-section h3 { color: var(--gold); border-bottom: 1px solid var(--gold); padding-bottom: 5px; }
        .hilo-table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        .hilo-table td { padding: 10px; border: 1px solid #444; text-align: center; }

        /* --- SWITCH --- */
        .switch-container { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }
        .switch { position: relative; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top:0; left:0; right:0; bottom:0; background:#444; border-radius:34px; transition:0.4s; }
        .slider:before { position:absolute; content:""; height:18px; width:18px; left:4px; bottom:4px; background:white; border-radius:50%; transition:0.4s; }
        input:checked + .slider { background: var(--success); }
        input:checked + .slider:before { transform: translateX(24px); }
    </style>
</head>
<body>

    <header id="main-header" class="hidden">
        <button class="nav-btn" onclick="goHome()">üè† MENU</button>
        <button class="nav-btn" onclick="showScreen('guide-pro')">üéì GUIDE PRO</button>
    </header>

    <div id="home-screen" class="screen">
        <h1 style="text-align: center; font-size: 2.5rem; margin-bottom: 40px; color: var(--gold);">CASINO<br><span style="color:white; font-size: 1.2rem; letter-spacing: 5px;">STRAT√âGIE</span></h1>
        
        <div class="glass-panel" onclick="showScreen('bj-setup')" style="cursor: pointer; border-left: 5px solid var(--gold);">
            <h2 style="margin-top:0;">üÉè Blackjack Pro</h2>
            <p style="color: #888;">Entra√Ænement au comptage Hi-Lo avec True Count et arr√™ts al√©atoires.</p>
        </div>

        <div class="glass-panel" onclick="showScreen('papayoo-setup')" style="cursor: pointer;">
            <h2 style="margin-top:0;">üé≠ Papayoo</h2>
            <p style="color: #888;">Calculateur de score simplifi√© pour vos soir√©es entre amis.</p>
        </div>
    </div>

    <div id="guide-pro" class="screen hidden">
        <h1 style="color:var(--gold)">Manuel du Compteur</h1>
        
        <div class="guide-section">
            <h3>1. La M√©thode Hi-Lo</h3>
            <p>On attribue une valeur √† chaque carte pour estimer le ratio de cartes hautes restantes.</p>
            <table class="hilo-table">
                <tr style="color: var(--success);"><td>2, 3, 4, 5, 6</td><td>+1</td><td>Low (Bon)</td></tr>
                <tr style="color: #888;"><td>7, 8, 9</td><td>0</td><td>Neutre</td></tr>
                <tr style="color: var(--danger);"><td>10, J, Q, K, A</td><td>-1</td><td>High (Mauvais)</td></tr>
            </table>
        </div>

        <div class="guide-section">
            <h3>2. Le True Count (Le Vrai Avantage)</h3>
            <p>Le Running Count (RC) ne suffit pas. Dans un sabot de 6 decks, un RC de +6 est moins puissant que dans un sabot de 2 decks.</p>
            <div style="background:#252525; padding: 15px; border-radius: 8px; font-family: monospace; text-align: center;">
                TRUE COUNT = RC / Decks Restants
            </div>
            <p><i>Exemple : RC de +8 avec 4 decks restants ‚Üí True Count = +2.</i></p>
        </div>

        <div class="guide-section">
            <h3>3. Conseils de Mise</h3>
            <p>L'avantage math√©matique passe du c√¥t√© du joueur quand le <b>True Count ‚â• 1</b>.</p>
            <ul>
                <li><b>TC ‚â§ 0 :</b> Mise minimum (S√©curit√©).</li>
                <li><b>TC +2 :</b> Multiplier mise par 4.</li>
                <li><b>TC +4 :</b> Mise maximale.</li>
            </ul>
        </div>

        <button class="btn-main" onclick="showScreen('bj-setup')">RETOUR AU JEU</button>
    </div>

    <div id="bj-setup" class="screen hidden">
        <h2 style="color:var(--gold)">Configuration</h2>
        <div class="glass-panel">
            <label>Nombre de Decks</label>
            <select id="bj-decks" style="width:100%; padding:12px; margin:10px 0; background:#333; color:white; border:none; border-radius:8px;">
                <option value="6">6 Decks (Casino)</option>
                <option value="2">2 Decks</option>
                <option value="1">1 Deck</option>
            </select>

            <label>Vitesse (sec/carte)</label>
            <input type="number" id="bj-speed" value="1.5" step="0.1" style="width:100%; padding:12px; margin:10px 0; background:#333; color:white; border:none; border-radius:8px;">

            <div class="switch-container">
                <span>Mode Al√©atoire (Test)</span>
                <label class="switch"><input type="checkbox" id="bj-random-mode"><span class="slider"></span></label>
            </div>
        </div>
        <button class="btn-main" onclick="startBJ()">Lancer la session</button>
    </div>

    <div id="bj-game" class="screen hidden">
        <div style="display:flex; justify-content: space-between; align-items: center;">
            <span id="bj-cards-left" style="color: var(--gold);">-- Decks</span>
            <button class="nav-btn" onclick="pauseBJ()">PAUSE</button>
        </div>

        <div id="bj-card-display">
            <div class="card-suit top-left"></div>
            <div id="bj-card-val">?</div>
            <div class="card-suit bottom-right"></div>
        </div>

        <div id="bj-info-panel" class="glass-panel hidden">
            <h2 id="bj-panel-title" style="text-align:center; margin-top:0; color:var(--gold);">PAUSE</h2>
            
            <div class="stat-grid">
                <div class="stat-box"><span class="stat-label">Running</span><span id="bj-rc" class="stat-val">?</span></div>
                <div class="stat-box"><span class="stat-label">True Count</span><span id="bj-tc" class="stat-val">?</span></div>
            </div>

            <div id="bj-advice-area">
                <p id="bj-bet-advice" style="font-weight:bold; color:var(--success); text-align:center;"></p>
                <div id="bj-pro-tips" style="font-size:0.9rem; border-top:1px solid #444; padding-top:10px; margin-top:10px;"></div>
            </div>

            <button id="bj-action-btn" class="btn-main" onclick="resumeBJ()">REPRENDRE</button>
            <button id="bj-quit-btn" class="nav-btn" style="width:100%; margin-top:10px; border-color:#555; color:#888;" onclick="goHome()">QUITTER</button>
        </div>
    </div>

    <div id="papayoo-setup" class="screen hidden">
        <h2>Setup Papayoo</h2>
        <div id="p-inputs">
             <input type="text" placeholder="Joueur 1" class="p-name" style="width:100%; padding:12px; margin:5px 0;">
             <input type="text" placeholder="Joueur 2" class="p-name" style="width:100%; padding:12px; margin:5px 0;">
        </div>
        <button class="btn-main" onclick="startPapayoo()">Jouer</button>
    </div>

    <script>
        let bjDeck = [];
        let bjRunningCount = 0;
        let bjInterval = null;
        let bjIsPaused = false;
        let bjCardsDealt = 0;

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.getElementById('main-header').classList.toggle('hidden', id === 'home-screen');
        }

        function goHome() {
            clearInterval(bjInterval);
            showScreen('home-screen');
        }

        // BLACKJACK LOGIC
        function startBJ() {
            const numDecks = parseInt(document.getElementById('bj-decks').value);
            bjDeck = [];
            const values = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
            const suits = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
            for(let d=0; d<numDecks; d++) {
                for(let s of suits) { for(let v of values) { bjDeck.push({v, s}); } }
            }
            bjDeck.sort(() => Math.random() - 0.5);
            bjRunningCount = 0;
            bjCardsDealt = 0;
            showScreen('bj-game');
            resumeBJ();
        }

        function dealCard() {
            if(bjDeck.length === 0) {
                endBJSession();
                return;
            }
            const card = bjDeck.pop();
            bjCardsDealt++;
            
            const valEl = document.getElementById('bj-card-val');
            valEl.innerText = card.v;
            const isRed = (card.s === '‚ô•' || card.s === '‚ô¶');
            valEl.style.color = isRed ? 'var(--danger)' : 'black';
            document.querySelectorAll('.card-suit').forEach(el => {
                el.innerText = card.s;
                el.style.color = valEl.style.color;
            });

            const decksRem = (bjDeck.length / 52).toFixed(1);
            document.getElementById('bj-cards-left').innerText = `üÉè ${decksRem} Decks restants`;

            // Compte Hi-Lo
            if(['2','3','4','5','6'].includes(card.v)) bjRunningCount++;
            else if(['10','J','Q','K','A'].includes(card.v)) bjRunningCount--;

            // Arr√™t al√©atoire
            if(document.getElementById('bj-random-mode').checked && Math.random() < 0.12 && bjCardsDealt > 3) {
                setTimeout(triggerTest, 500);
            }
        }

        function triggerTest() {
            clearInterval(bjInterval);
            bjIsPaused = true;
            document.getElementById('bj-panel-title').innerText = "üé≤ TEST M√âMOIRE";
            document.getElementById('bj-rc').innerText = "???";
            document.getElementById('bj-tc').innerText = "???";
            document.getElementById('bj-bet-advice').innerText = "";
            document.getElementById('bj-pro-tips').innerText = "Calculez le Running Count et le True Count avant de r√©v√©ler.";
            
            const btn = document.getElementById('bj-action-btn');
            btn.innerText = "R√âV√âLER";
            btn.onclick = revealStats;
            document.getElementById('bj-info-panel').classList.remove('hidden');
        }

        function pauseBJ() {
            clearInterval(bjInterval);
            bjIsPaused = true;
            document.getElementById('bj-panel-title').innerText = "PAUSE ANALYSE";
            revealStats();
        }

        function revealStats() {
            const decksRem = Math.max(0.5, bjDeck.length / 52);
            const tc = Math.floor(bjRunningCount / decksRem);
            
            document.getElementById('bj-rc').innerText = bjRunningCount;
            document.getElementById('bj-tc').innerText = tc;
            
            const advice = document.getElementById('bj-bet-advice');
            const tips = document.getElementById('bj-pro-tips');

            if(tc >= 3) {
                advice.innerText = "üî• MISEZ FORT (8-12 unit√©s)";
                tips.innerHTML = "<b>Conseil :</b> Sabot charg√© en grosses cartes. Prenez l'assurance si le croupier a un As. Doublez vos 9 contre un 2 et vos 11 contre un As.";
            } else if(tc >= 1) {
                advice.innerText = "‚úÖ MISE MOD√âR√âE (" + (tc+1) + " unit√©s)";
                tips.innerHTML = "<b>Conseil :</b> L'avantage bascule doucement. Jouez votre strat√©gie de base sans d√©viation majeure.";
            } else {
                advice.innerText = "üßä MISE MINIMUM";
                tips.innerHTML = "<b>Conseil :</b> Sabot neutre ou n√©gatif. Ne prenez aucun risque, attendez que le compte remonte.";
            }

            const btn = document.getElementById('bj-action-btn');
            btn.innerText = "CONTINUER";
            btn.onclick = resumeBJ;
            document.getElementById('bj-info-panel').classList.remove('hidden');
        }

        function endBJSession() {
            clearInterval(bjInterval);
            document.getElementById('bj-panel-title').innerText = "üèÅ FIN DU PAQUET";
            revealStats();
            const btn = document.getElementById('bj-action-btn');
            btn.innerText = "REJOUER";
            btn.onclick = startBJ;
        }

        function resumeBJ() {
            document.getElementById('bj-info-panel').classList.add('hidden');
            const speed = parseFloat(document.getElementById('bj-speed').value) * 1000;
            bjInterval = setInterval(dealCard, speed);
            bjIsPaused = false;
        }

        // Shortcut barre espace
        window.onkeydown = (e) => {
            if(e.code === "Space" && !document.getElementById('bj-game').classList.contains('hidden')) {
                bjIsPaused ? resumeBJ() : pauseBJ();
            }
        };

        function startPapayoo() { alert("Mode Papayoo en cours de maintenance esth√©tique, utilisez le Blackjack !"); }
    </script>
</body>
</html>
